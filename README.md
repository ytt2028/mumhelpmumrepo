# MumHelpMum – MVP (Flutter + Firebase)

A gentle, mobile‑first app for mums of 0–6y to share resources, plan family life, and discover deals/events. Tech stack: **Flutter** (multi‑platform), **Firebase** (Auth + Firestore), and lightweight UI components.

---

## 0) Personas & Design Principles (recap)

* **Primary user**: mums/caregivers (25–40), busy, mobile‑first, prefer **simple, friendly** design.
* **Visual style**: soft colors, large rounded corners, light shadows, roomy spacing.
* **Fonts & icons**: Poppins (via GoogleFonts), Material Icons.
* **Color tokens** (in `lib/core/theme/colors.dart`):

  * `bg` **#F8F8F8** (page background)
  * `text` **#333333** (primary text)
  * `coral` **#FF7D7D** (brand / heart / highlights)
  * `mint` **#5AC8BC** (primary actions / selected chips / active tab)
  * `lightBlue` **#A5D8FF** (Health & Wellness card)
  * `lightGreen` **#B2EBF2** (Support Groups card)
  * `peach` **#FFC1A1** (Local Activities card)

---

## 1) Features in this MVP

* **Hub (Mumhelpmum)**: Twitter‑like feed of parenting posts. Search + time filters (Latest/This Week/This Month) + 0–6y topic chips (two‑row with More/Less). Tap **+** to create a post (modal bottom sheet). New posts insert to top of feed.
* **Deals**: Free / Group Buy / **MHM‑Exclusive** specials list with quick add.
* **Events**: Searchable list of local events with filter chips and “+” quick‑add.
* **Planner**: Daily activities list (in a blue card), voice input (speech‑to‑text demo), nap/focus timer with quick‑start pills (15/30/45m), Reset.
* **Auth Gate (recommended)**: If **not logged in →** show login/sign‑up. If **logged in →** go straight to main Shell (Hub/Deals/Events/Planner). Avatar shown top‑right on Hub; tap to **Edit Profile** or **Sign out**.

---

## 2) Project Structure (current)

```
lib/
  main.dart
  firebase_options.dart              # auto‑generated by FlutterFire CLI
  core/
    theme/
      colors.dart                    # color tokens above
      app_theme.dart                 # typography, components theme (small nav captions)
    widgets/
      mhm_header.dart                # unified top brand bar (compact / actions)
      mhm_card.dart                  # generic card with optional body
    state/
      feed_state.dart                # ValueNotifier<List<Post>> for in‑memory feed
  features/
    shell/
      shell_screen.dart              # bottom app bar with center notch & FAB (+)
    hub/
      hub_screen.dart                # feed w/ search, time filters, topic chips
      create_post_sheet.dart         # modal sheet for composing a post
      post_model.dart                # Post model + helpers (authorInitial/timeAgo)
    deals/
      deals_screen.dart
    events/
      events_screen.dart
    planner/
      planner_screen.dart
    auth/
      auth_gate.dart                 # decides Login vs Shell based on FirebaseAuth
      login_screen.dart              # email/pass login + Google (web) demo
      signup_screen.dart             # extra fields: displayName, birthday, city
    profile/
      profile_screen.dart            # edit profile, sign out
assets/
  (optional images)
```

---

## 3) Prerequisites

* **Flutter** 3.35.x (stable) – already verified.
* **Xcode/Android Studio** optional (web target runs without them).
* **Firebase CLI** (`firebase --version`) and **FlutterFire CLI** (`flutterfire --version`).
* Google account to create the Firebase project.

---

## 4) Set up Firebase (Web) – One Time

> We already created project `mumhelpmum-dev` and ran FlutterFire once. If you re‑clone or change machine, repeat these steps.

1. **Login**:

   ```bash
   firebase login
   ```
2. **Configure Flutter app to Firebase** (run at your Flutter project root):

   ```bash
   flutterfire configure --project mumhelpmum-dev --platforms=web
   ```

   This generates `lib/firebase_options.dart`.
3. **Initialize Firebase in main** (already done):

   ```dart
   import 'package:firebase_core/firebase_core.dart';
   import 'firebase_options.dart';

   void main() async {
     WidgetsFlutterBinding.ensureInitialized();
     await Firebase.initializeApp(options: DefaultFirebaseOptions.currentPlatform);
     runApp(const MhmApp());
   }
   ```
4. **Enable Auth providers** in Firebase Console → Authentication:

   * Email/Password (required)
   * Google (optional; authorize your local dev domain when testing web)
5. **(Optional) Firestore**: create database in test mode for development. Collections used:

   * `users/{uid}` → profile fields (`displayName`, `birthday`, `city`, `photoURL`, timestamps)

---

## 5) Dependencies (`pubspec.yaml`)

```yaml
dependencies:
  flutter:
    sdk: flutter
  cupertino_icons: ^1.0.8
  google_fonts: ^6.3.2
  flutter_riverpod: ^3.0.3
  speech_to_text: ^7.3.0
  # Firebase
  firebase_core: ^3.6.0
  firebase_auth: ^5.3.1
  google_sign_in: ^6.2.1
  shared_preferences: ^2.3.2
  cloud_firestore: ^5.5.0

flutter:
  uses-material-design: true
  assets:
    - assets/
```

> After changing dependencies: `flutter clean && flutter pub get`

---

## 6) Run the App

```bash
flutter run -d chrome
```

* First launch: **Auth Gate** appears → create account (email + password) → set **display name / birthday / city**.
* After login: navigates to **Shell**. Bottom app bar with center **+** (inset) shows **Create Post** panel.

---

## 7) Key UI Components

### 7.1 MhmHeader

A compact brand bar, optional right‑side profile avatar + bell.

```dart
// Hub (want actions)
const MhmHeader(compact: true, showActions: true);

// Events/Deals/Planner (brand only)
const MhmHeader(compact: true);
```

### 7.2 Shell (bottom app bar + center notch)

* Items order: **Mumhelpmum → Deals → Events → Planner**.
* Center **FAB** triggers `CreatePostSheet`, inserts to feed top.
* Overflow/height issues prevented by sized nav items and SafeArea padding.

### 7.3 Hub feed

* Search bar (`posts / places / tags…`).
* **Time filters**: Latest / This Week / This Month.
* **Topic chips** (two rows by default, **More/Less** toggles). Examples: `playground`, `indoor`, `stroller friendly`, `fenced`, `shaded`, `library`, `storytime`, `zoo`, `art & craft`, `swimming`, `nap tips`, `meal ideas`, `free`, `group buy`, `promotions`, `deals`…
* Post card: avatar initial, author, timeAgo, text, optional image, chips (tags), action row (Create event / Save / comments / likes / share).

### 7.4 Deals

* Sections for **Free**, **Group Buy**, **MHM‑Exclusive** (merchant offers for MumHelpMum).
* Each card: icon, title, subtitle (e.g., schedule/price), trailing add `+`.

### 7.5 Events

* Search + filter chips (This Week / Today / Free / Workshops / Outdoors…).
* List tiles with icon, title, multiline subtitle (time & venue), trailing `+`.

### 7.6 Planner

* Blue **Daily Activities** card holding an internal checklist (add/toggle/delete).
* **Voice input** demo (speech_to_text) appends recognized items.
* **Nap/Focus Timer** mint card with `15m/30m/45m` quick start + Reset.

### 7.7 Auth & Profile

* **Auth Gate** switches between `LoginScreen` and `ShellScreen` using `FirebaseAuth.instance.authStateChanges()`.
* **Sign Up** collects `displayName`, `birthday`, and (optionally) `city`, writes to `users/{uid}` in Firestore.
* **Password policy**: min 8 chars, must contain letter & special symbol (UI‑side validation).
* After login, Hub top‑right shows **avatar**; tap to open menu → **Edit Profile** / **Sign out**.

---

## 8) Step‑by‑Step Commands

> Use segmented steps to avoid errors.

**A. Get deps & run (web):**

```bash
flutter clean
flutter pub get
flutter run -d chrome
```

**B. Firebase CLIs (first time on a machine):**

```bash
# FlutterFire CLI
dart pub global activate flutterfire_cli
export PATH="$PATH:$HOME/.pub-cache/bin"

# Firebase CLI
dart pub global activate flutterfire_cli # (if PATH not set before)
# Or install via npm: npm i -g firebase-tools
firebase login
```

**C. Link app to Firebase (already done once):**

```bash
flutterfire configure --project mumhelpmum-dev --platforms=web
```

---

## 9) Troubleshooting (common)

* **RenderFlex overflow (bottom nav)**: we size `_NavItem` to `height: 34`, captions `fontSize: 9`, add SafeArea padding, and use `CircularNotchedRectangle()` with `notchMargin: 8`.
* **`$` in strings**: escape in Dart single‑quoted strings: `'Price: \$18'`.
* **`Color` not found**: `import 'package:flutter/material.dart';` must be present in files using `Color(...)`.
* **CardTheme type**: use `CardTheme` correctly in `ThemeData(cardTheme: const CardTheme(...))`.
* **YAML errors**: only one `dependencies:` section; keep indentation with 2 spaces; run `flutter pub get` after edits.
* **`cloud_firestore` missing**: add to pubspec and run `flutter pub get`.
* **Google sign‑in (web)**: allow pop‑ups; add your dev host to Authorized domains in Firebase console.

---

## 10) GitHub Desktop – Push code

1. Open **GitHub Desktop** → **Add Local Repository** → choose your project folder.
2. Commit with message, choose a remote (create new repo on GitHub if needed).
3. **Publish repository** (first time) → afterwards use **Push origin**.

---

## 11) Next Milestones

* **AI Features**: secure Gemini calls via **Cloud Functions** (never ship keys in client).
* **Storage**: upload images to Firebase Storage for posts; save `imageUrl` from Storage.
* **Security Rules**: lock down reads/writes per user; validate post sizes/fields.
* **Analytics/Crashlytics**: basic events + stability metrics.
* **Localization**: English/中文 toggle for broader NZ/Chinese mum communities.

---

### Quick Glossary (beginner‑friendly)

* **Auth Gate**: a small widget that decides whether to show Login or the main app based on current login state.
* **Modal Bottom Sheet**: a panel that slides up from the bottom to enter information (like creating a post).
* **ValueNotifier**: a simple reactive state container (when the value changes, UI rebuilds).
* **Firestore**: NoSQL database by Firebase; we store user profiles and (later) posts.

If anything is unclear or you want the README trimmed for handover, tell me what to keep/remove and I’ll re‑shape it quickly.
